<%- include('partials/requirement/header'); -%>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

          <!-- Topbar(width>1440px) -->
          <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow breakpoint_navbar">

            <!-- Sidebar Toggle (Topbar) -->


            <!-- Topbar Navbar -->
            <ul class="navbar-nav ml-auto">
              <img class="img-profile" src="/assets/images/logocolorartboard-2.svg" style="width: 15%;">
            </ul>

          <!-- Topbar Search -->


            <div class="dropdown no-arrow rounded-circle mr-3 breakpoint_dropdown">
              <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLinkNav" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-weight:bold;">
                <!-- <i class="fas fa-ellipsis-h fa-sm fa-fw text-blue-400"></i> -->
                Menú
              </a>
              <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in flag" aria-labelledby="dropdownMenuLinkNav" x-placement="bottom-end" style="position: absolute; transform: translate3d(-152px, 18px, 0px); top: 0px; left: 0px; will-change: transform;">
                <div class="sidebar-brand d-flex align-items-center justify-content-center" style="padding: 50px 0 50px 0;">
                  <div style="background-color: blue;width: 35px;height: 35px;border-radius: 42px; margin-right: 12px;">
                    <div class="col-md-2">
                      <img src="/assets/images/Client/notification.svg" class="card-img" alt="..." style="width: auto; background-color: blue; height: auto;position: relative;top: 0;bottom: 0;margin: auto; margin-left: -1px;margin-top: 8px;border-radius: 15px;">
                    </div>
                  </div>
                  <div style="background-color: blue;width: 35px;height: 35px;border-radius: 42px; margin-right: 40px;">
                    <div class="col-md-2">
                      <img src="/assets/images/Client/settings.svg" class="card-img" alt="..." style="width: auto; background-color: blue; height: auto;position: relative;top: 0;bottom: 0;margin: auto; margin-left: -3px;margin-top: 8px;border-radius: 15px;" data-toggle="modal" data-target="#smallModal" type="button">
                    </div>
                  </div>
                  <a href="/client/profile" style="font-family: Quicksand; font-weight: bold; font-stretch: normal; font-style: normal; line-height: 1.33; color: #2a2a35; margin-right: 10px; text-decoration: none; margin-top: -20px;"><%= user.firstname %> <%= user.lastname %></a>
                  <a href="/client/profile"><img class="img-profile rounded-circle" src="<%= user.photo %>" style="width: 60px; height: 60px; object-fit: cover;"></a>
                </div>
              </div>
            </div>
          </nav>

          <!-- small modal for settings -->
        <div class="modal fade" id="smallModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Configuración</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
            <div class="modal-body">
              <a class="btn btn-block btn-primary px-4 label_style2 steps1" data-dismiss="" style="width: auto;" href="/client/profile">Ver perfil</a>
              <a class="btn btn-block btn-primary px-4 label_style2 steps1" data-dismiss="" style="width: auto;" href="/login/logout">Cerrar sesión</a>
            </div>
            </div>
          </div>
        </div>

          <!-- small modal for add university -->

          <div class="modal fade" tabindex="-1" role="dialog" id="addUni" aria-labelledby="addUni" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header" style="border-bottom:0;">
                  <h5 class="modal-title">Agregar</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" class="px-2" id="modalClose">&times;</span>
                  </button>
                </div>
                <form enctype='application/json' method="post">
                  <div class="modal-body">
                    <div class="container-fluid" style="margin-top: 0 !important;">
                      <div class="row">
                        <div class="col-12 selects">
                          <label for="add_university">QUE DESEA AÑADIR?</label><br>
                          <div class="row">
                            <div class="col-12">
                              <select name="add_university" id="add_university" class="form-control form-input" style="padding:0.35rem;" required>
                                <option value="Universidad" selected>Universidad</option>
                                <option value="Carrera">Carrera</option>
                                <option value="Categoría Laboral">Categoría Laboral</option>
                              </select>
                            </div>
                          </div>
                        </div>
                        <div class="col-12 universityStuff">
                          <label for="university_name">UNIVERSIDAD</label><br>
                          <input type="text" class="form-control form-input" name="university_name" id="university_name" required>
                        </div>
                        <div class="col-12 selects universityStuff">
                          <label for="university_country">PAÍS DE LA UNIVERSIDAD</label><br>
                          <select class="form-control form-input" name="university_country" id="university_country" style="color: #2a2a35" required>
                            <% countries.forEach(function(country){ %>
                                <option>
                                  <%= country %>
                                </option>
                                <% }); %>
                        </select>
                        </div>
                        <div class="col-12 careerStuff d-none">
                          <label for="university_career">CARRERA</label><br>
                          <input type="text" class="form-control form-input" name="university_career" id="university_career" required>
                        </div>
                        <div class="col-12 workStuff d-none">
                          <label for="work_category">CATEGORÍA LABORAL</label><br>
                          <input type="text" class="form-control form-input" name="work_category" id="work_category" required>
                        </div>
                        <div class="col-12 workStuff d-none">
                          <label for="work_subcategory">SUBCATEGORÍA LABORAL</label><br>
                          <input type="text" class="form-control form-input" name="work_subcategory" id="work_subcategory">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer" style="border-top:0;">
                    <div class="container-fluid" style="margin-top: 0 !important;">
                      <div class="row">
                        <div class="col-12 text-center">
                          <button id="addUniversity" type="submit" class="label_style" style="width: 100% !important;">Enviar</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>

          <!-- End of Topbar -->

          <!-- Topbar(width<1440px) -->
          <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 fixed-top shadow breakpoint_navbar2">

            <!-- Sidebar Toggle (Topbar) -->


            <!-- Topbar Navbar -->
            <ul class="navbar-nav ml-auto">
              <img class="img-profile" src="/assets/images/logocolorartboard-2.svg" style="width: 15%;">
            </ul>

          <!-- Topbar Search -->


            <div class="dropdown no-arrow rounded-circle mr-3 breakpoint_dropdown position-static">
              <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLinkNav" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-weight:bold;">
                <!-- <i class="fas fa-ellipsis-h fa-sm fa-fw text-blue-400"></i> -->
                Menú
              </a>
              <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in flag w-100 text-center" aria-labelledby="dropdownMenuLinkNav" x-placement="bottom-end" style="position: absolute; transform: translate3d(-152px, 18px, 0px); top: 0px; left: 0px; will-change: transform;">
                <div class="sidebar-brand d-flex align-items-center justify-content-center" style="padding: 25px 0 15px 0;">
                  <div style="background-color: blue;width: 35px;height: 35px;border-radius: 42px; margin-right: 12px;">
                    <div class="col-md-2">
                      <img src="/assets/images/Client/notification.svg" class="card-img" alt="..." style="width: auto; background-color: blue; height: auto;position: relative;top: 0;bottom: 0;margin: auto; margin-left: -1px;margin-top: 8px;border-radius: 15px;">
                    </div>
                  </div>
                  <div style="background-color: blue;width: 35px;height: 35px;border-radius: 42px; margin-right: 40px;">
                    <div class="col-md-2">
                      <img src="/assets/images/Client/settings.svg" class="card-img" alt="..." style="width: auto; background-color: blue; height: auto;position: relative;top: 0;bottom: 0;margin: auto; margin-left: -3px;margin-top: 8px;border-radius: 15px;" data-toggle="modal" data-target="#smallModal" type="button">
                    </div>
                  </div>
                  <a href="/client/profile" style="font-family: Quicksand; font-weight: bold; font-stretch: normal; font-style: normal; line-height: 1.33; color: #2a2a35; margin-right: 10px; text-decoration: none; margin-top: -20px;"><%= user.firstname %> <%= user.lastname %></a>
                  <a href="/client/profile"><img class="img-profile rounded-circle" src="<%= user.photo %>" style="width: 60px; height: 60px; object-fit: cover;"></a>
                </div>
                <div class="dropdown-divider"></div>
                <li class="nav-item active d-flex align-items-center justify-content-center">
                  <button class="btn btn-outline-primary style_btn" style="border-radius: 10px;" id="workerBtn1">Ir a Perfil de Socio</button>
                </li>
                <div class="dropdown-divider"></div>
                <div class="h5 mb-0" style="color: black">
                  Información
                </div>
                <div class="dropdown-divider"></div>
                <div class="card mb-3 style_border" style="max-width: 335px; margin: 0 auto; padding: 0;">
                  <div class="row no-gutters">
                    <div class="col-md-2">
                      <img src="/assets/images/Client/diamond.svg" class="card-img" alt="..." style="width: 51%; background-color: blue; height: 70%;position: absolute;top: 0;bottom: 0;margin: auto;border-radius: 15px;">
                    </div>
                    <div class="col-md-10">
                      <div class="card-body" style="padding: 15px 0 5px 0;">
                        <h5 class="card-title text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px; ">Tienes 0 pagos pendientes</h5>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="dropdown-divider"></div>
                <div class="card mb-3 style_border" style="max-width: 335px; margin: 0 auto; padding: 0;">
                  <div class="row no-gutters">
                    <div class="col-md-2">
                      <img src="/assets/images/Client/growth.svg" class="card-img" alt="..." style="width: 51%; background-color: blue; height: 70%;position: absolute;top: 0;bottom: 0;margin: auto;border-radius: 15px;">
                    </div>
                    <div class="col-md-10">
                      <div class="card-body" style="padding: 15px 0 5px 0;">
                        <h5 class="card-title text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px; ">Desempeño de referidos: 0/10
                          </h5>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="dropdown-divider"></div>
                <div class="card shadow mb-4" style="margin: 0 auto; max-width: 335px; display: none;">
                  <!-- Card Header - Dropdown -->
                  <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary" style="font-size: 14px; color: #2a2a35 !important;">Tu socio favorito</h6>
                    <div class="dropdown no-arrow">
                      <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLinkpartner" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-h fa-sm fa-fw text-blue-400"></i>
                      </a>
                      <!-- <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLinkpartner" x-placement="bottom-end" style="position: absolute; will-change: transform; top: 0px; left: 0px; transform: translate3d(25px, 18px, 0px);">
                        <div class="dropdown-header">Dropdown Header:</div>
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                      </div> -->
                    </div>
                  </div>
                  <!-- Card Body -->
                  <div class="card mb-3" style="max-width: 450px; padding: 0; box-shadow: none !important;">
                    <div class="row no-gutters" style="margin-top: 10px;">
                      <div class="col-md-4">
                        <img src="https://source.unsplash.com/QAB-WJcbgJk/60x60" class="card-img" alt="..." style="width: auto; height: auto;position: relative;top: 0;bottom: 0;margin: auto;">
                      </div>
                      <div class="col-md-8">
                        <div class="card-body" style="padding: 15px 0 5px 0;">
                          <h5 class="card-title text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px; ">Eduardo Florez</h5>
                          <p class="card-text text-center" style="font-weight: normal; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px;">4 requerimientos completados</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="dropdown-divider"></div>
                <div class="card shadow mb-4" style="margin: 85px auto 0 auto; background-color: #f4f4ff; box-shadow: -10px -10px 20px 0 #e0e0ff, 10px 10px 20px 0 #ffffff; max-width: 335px;">
                  <!-- Card Header - Dropdown -->
                  <div class="card-header py-3 d-flex flex-row align-items-center justify-content-center" style="background-color: transparent;">
                    <img src="/assets/images/Client/group-8.svg" alt="..." style="margin-top: -120px;">
                  </div>
                  <!-- Card Body -->
                  <div class="card-body text-center">
                    <h6 class="m-0 font-weight-bold text-primary text-center" style="margin-top: 50px !important; color: #2a2a35 !important">Mi calificación</h6>
                    <p class="card-text text-center" style="font-weight: lighter; font-stretch: normal; font-style: normal; line-height: 1.14; letter-spacing: normal; color: #2a2a35; margin-top: 10px;">Desempeño como cliente</p>
                    <h6 class="m-0 font-weight-bold text-primary text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: 1.14; letter-spacing: normal; color: #009270 !important; margin-top: 50px !important; font-size: 25px;">0 de 5</h6>
                    <a href="/">Ver calificaciones</a>
                  </div>
                </div>
              </div>
            </div>
          </nav>

          <!-- End of Topbar -->
          <!-- Begin Page Content -->
        <div class="container-fluid">

            <!-- Page Heading -->
            <div class="d-sm-flex align-items-center justify-content-between mb-4" style="margin: 50px 0 0px 0;">
                <a class="fas fa-arrow-left" style="width: auto !important;" href="/client"><p style="font-family: Quicksand; display: inline-block;">&nbsp&nbsp Volver a inicio </p></a></div>

            <!-- Content Row -->
            <div class="row">
                <div class="col col-md-3">
                    <div class="card" style="background-color: transparent; padding: 0;">
                        <img src="<%= user.photo %>" alt="..." style="border-radius: 15px; width: auto; height: 250px; object-fit: cover;">
                    </div>
                    <div class="card mb-4" style="box-shadow: none; padding: 0;">
                        <!-- Card Body -->
                          <div class="card-body">
                            <ul id="progressbar" style="margin: 0; padding: 0; list-style:none">
                              <li><a class="fas fa-user user_style" style="width: auto !important; margin: 20px 0;"><p style="font-family: Quicksand; display: inline-block; color: #4444ff;">&nbsp;&nbsp; Información personal </p></a></li>
                              <li><a class="fas fa-book-open user_style_disallow" style="width: auto !important; margin: 20px 0;"><p style="font-family: Quicksand; display: inline-block; color: #d8d8d8;">&nbsp;&nbsp; Información académica </p></a></li>
                              <li><a class="fas fa-laptop user_style_disallow" style="width: auto !important; margin: 20px 0;"><p style="font-family: Quicksand; display: inline-block; color: #d8d8d8;">&nbsp;&nbsp; Información laboral </p></a></li>
                            </ul>
                          </div>
                          <div class="card-body text-center">
                              <button type="submit" action="/client/updateInfo" class="label_style" style="font-size: 20px;" form="steps_process" id="publishBtn" style="font-weight: bold !important; color: #fff !important">Guardar cambios</button>
                          </div>
                      </div>
                </div>
                <div class="col col-md">
                    <div class="card" style="box-shadow: none">
                        <h1 style="color: #4444ff; font-weight: bold;"><%= user.firstname %> <%= user.lastname %></h1>
                        <p style="color: #2a2a35;">Miembro desde el <%= user.createdAt %></p>
                        <div class="row no-gutters">
                            <div class="col-xl col-md">
                                <div class="row" style="margin-top: 25px;">
                                    <div class="col-sm-6 col-xl delete_after" style="margin-bottom: 20px;">
                                        <div class="card border-35 asilinks-card white-bg black-shadow h-100">
                                            <div class="card-body small-title">
                                                <div class="row">
                                                    <div class="col-9">
                                                        <div class="row">
                                                            <div class="col-12" style="color: #4444ff;">
                                                                <b>Socios</b>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12" style="color: #2a2a35">
                                                                Siempre serán tuyos ❤️
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-3 center-vert px-1">
                                                        <div class="row">
                                                            <div class="col-12 red-text pl-1">
                                                                <b class="border-half pink-bg p-2" style="background: #f4f4ff; border-radius: 42px; color: #4444ff;">0</b>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-xl delete_after" style="margin-bottom: 20px;">
                                        <div class="card border-35 asilinks-card white-bg black-shadow h-100">
                                            <div class="card-body small-title">
                                                <div class="row">
                                                    <div class="col-9">
                                                        <div class="row">
                                                            <div class="col-12" style="color: #4444ff;">
                                                                <b>Referidos</b>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12" style="color: #2a2a35">
                                                                Clientes y socios
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-3 center-vert px-1">
                                                        <div class="row">
                                                            <div class="col-12 red-text pl-1">
                                                                <b class="border-half pink-bg p-2" style="background: #f4f4ff; border-radius: 42px; color: #4444ff;"><%= users.length %>
                                                                </b>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-xl delete_after" style="margin-bottom: 20px;">
                                        <div class="card border-35 asilinks-card white-bg black-shadow h-100">
                                            <div class="card-body small-title">
                                                <div class="row">
                                                    <div class="col-9">
                                                        <div class="row">
                                                            <div class="col-12" style="color: #4444ff;">
                                                                <b>Requerimientos</b>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12" style="color: #2a2a35">
                                                                En proceso y terminadas
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-3 center-vert px-1">
                                                        <div class="row">
                                                            <div class="col-12 red-text pl-1">
                                                                <b class="border-half pink-bg p-2" style="background: #f4f4ff; border-radius: 42px; color: #4444ff;">0</b>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Form -->
      <div class="col-xl col-lg" style="margin-top: 50px;">
        <div class="card shadow mb-4">
          <!-- Card Body -->
          <div class="card-body">
            <form id="steps_process" enctype="multipart/form-data" action="/client/updateInfo" method="post">
              <fieldset>
                <div class="form-group row">
                    <div class="col-sm-6 delete_after">
                        <label for="title" for="firstname" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">NOMBRE</label>
                        <input type="text" class="form-control" name="firstname" id="firstname" placeholder="" style="color: #2a2a35" value="<%=user.firstname%>">
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="lastname">APELLIDO</label>
                        <input type="text" class="form-control" placeholder="" style="color: #2a2a35" name="lastname" id="lastname" value="<%=user.lastname%>">
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6 delete_after">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="firstname">DOCUMENTO DE IDENTIDAD</label>
                        <input type="text" class="form-control" id="title" placeholder="" style="color: #2a2a35"  name="userId" id="userId" value="<%=user.userId%>">
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">FECHA DE NACIMIENTO</label>
                        <input type="date" class="form-control" name="dob" id="dob" value="<%=birthday%>" title="Debes ser mayor de 13 años para registrarte">
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="bornCountry">PAIS DE NACIMIENTO</label>
                        <select class="form-control" style="color: #2a2a35" name="bornCountry" id="bornCountry">
                            <% countries.forEach(function(country){ %>
                                <option value="<%= country %>"
                                    <% if (country == user.country) { %>
                                        selected
                                    <% } %> > <%= country %></option>
                            <% }); %>
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="lastname">CIUDAD DE RESIDENCIA</label>
                        <input type="text" class="form-control" id="title" placeholder="" style="color: #2a2a35"  name="livingCity" id="livingCity" value="<%=user.city%>">
                    </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3" style="">
                    <p class="mb-0 text-left" style="font-weight: normal; white-space: nowrap; color: #bcbcca; font-weight: bold;">FOTO DE PERFIL</p>
                </div>
                </div>
                <div class="form-group row">
                  <span>
                    <input type="file" accept=".jpg,.jpeg,.png" name="profPic" id="profPic" class="inputfile"/>
                    <label for="profPic" id="profile_file" class="label_style"><span>Cambiar foto</span></label>
                  </span>
                </div>
                <div class="form-group row">
                    <div class="col-sm-3" style="margin-top: 50px;">
                        <p class="mb-0 text-left" style="font-weight: normal; white-space: nowrap; color: #bcbcca; font-weight: bold;">GÉNERO</p>
                    </div>
                </div>
                <section class="radio_requeriments2" id="tabs3-2" style="margin-bottom: 50px;">
                    <label>
                      <input type="radio" name="radio2" value="Femenino" id="radio00">
                        <div class="btn_nav3 btn-sik3"><span>Femenino</span></div>
                      </label>
                      <label>
                        <input type="radio" name="radio2" value="Masculino" id="radio11">
                        <div class="btn_nav3 btn-sik3"><span>Masculino</span></div>
                      </label>
                      <label>
                        <input type="radio" name="radio2" value="Indefinido" id="radio22">
                        <div class="btn_nav3 btn-sik3"><span>Indefinido</span></div>
                      </label>
              </section>
                <button type="button" class="btn btn-primary px-4 float-right label_style steps1" style="font-weight: bold;">Siguiente</button>
              </fieldset>
              <fieldset>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">¿EN QUE PAIS ESTUDIASTE?</label>
                        <select class="form-control" name="studyCountry" id="studyCountry" style="color: #2a2a35" onchange="loadUni()">
                            <% countries.forEach(function(country){ %>
                                <option value="<%= country %>"
                                    <% if (country == user.studyInfo.studyCountry) { %>
                                        selected
                                    <% } %> > <%= country %></option>
                                <% }); %>
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;"></label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">INSTITUCIÓN</label>
                        <select class="form-control" id="institution" style="color: #2a2a35" name="institution" onchange="loadCareers()">
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">¿No encuentras tu institución?<a href="#" data-toggle="modal" data-target="#addUni"> ¡Agrégala aquí!</a></label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="firstname">CARRERA</label>
                        <select class="form-control" style="color: #2a2a35" name="career" id="career">
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">¿No encuentras tu carrera?<a href="#" data-toggle="modal" data-target="#addUni"> ¡Agrégala aquí!</a></label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6 delete_after">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="lastname">ESPECIALIDAD</label>
                        <input type="text" class="form-control" id="title" placeholder="" style="color: #2a2a35"  name="specialty" id="specialty" value="<%=user.studyInfo.specialty%>">
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;"></label>
                    </div>
                </div>
              <button type="button" class="btn btn-primary px-4 float-left label_style return" style="font-weight: bold;">Anterior</button>
              <button type="button" class="btn btn-primary px-4 float-right label_style steps1" style="font-weight: bold;">Siguiente</button>
              </fieldset>
              <fieldset>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">AÑOS DE EXPERIENCIA</label>
                        <select class="form-control" id="yearsExp" name="yearsExp" style="color: #2a2a35">
                                <option value="0-5" selected>0-5</option>
                                <option value="5-10">5-10</option>
                                <option value="10-15">10-15</option>
                                <option value="15-20">15-20</option>
                                <option value="20+">20+</option>
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;"></label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6 delete_after">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">RESUMEN CURRICULAR</label>
                        <span>
                            <input type="file" accept=".doc,.docx,.pdf" name="resume" id="resume" class="inputfile" data-multiple-caption="{count} archivos seleccionados" multiple="">
                            <label for="resume" class="label_style" id="resume_file">
                              <% if(!user.workInfo.fileOfName) { %>
                              <span>Adjuntar archivo(s) &nbsp;</span>
                              <i class="fa fa-paperclip" aria-hidden="true"></i>
                              <% } else { %>
                                <span><%=user.workInfo.fileOfName %></span>
                              <% } %>
                            </label>
                        </span>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;"></label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="firstname">CATEGORÍA LABORAL</label>
                        <select class="form-control" style="color: #2a2a35" name="workCategory" id="workCategory" onchange="loadCategories()">
                            <% category.forEach(function(cat){ %>
                                <option value="<%= cat %>"
                                    <% if (cat == user.workInfo.workCategory) { %>
                                        selected
                                    <% } %> > <%= cat %> </option>
                          <% }); %>
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">¿No encuentras tu categoría?<a href="#" data-toggle="modal" data-target="#addUni"> ¡Agrégala aquí!</a></label>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="title" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;" for="workSub">SUBCATEGORÍA LABORAL</label>
                        <select class="form-control" name="workSub" id="workSub" style="color: #2a2a35">
                        </select>
                    </div>
                    <div class="col-sm-6 delete_after">
                        <label for="category" style="font-family: Quicksand; font-weight: bold; color: #bcbcca;">¿No lo encuentras?<a href="#" data-toggle="modal" data-target="#addUni"> ¡Agrégala aquí!</a></label>
                    </div>
                </div>
              <button type="button" class="btn btn-primary px-4 text-center label_style return" style="font-weight: bold;">Anterior</button>
              </fieldset>
            </form>
          </div>
          </div>
          </div>
                                </div>
                          </div>
                    </div>
                </div>
        </div>

    </div>
  <!-- /.container-fluid -->

        </div>
        <!-- End of Main Content -->

        <!-- Footer -->
        <footer class="sticky-footer bg-white">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright &copy; Asilinks 2020</span>
            </div>
          </div>
        </footer>
        <!-- End of Footer -->

      </div>
      <!-- End of Content Wrapper -->

      <!-- Sidebar -->
      <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion style_sidebar" id="accordionSidebar">

        <!-- Sidebar - Brand -->
        <div class="sidebar-brand d-flex align-items-center justify-content-center" style="padding: 50px 0 50px 0;">
          <div style="background-color: blue;width: 35px;height: 35px;border-radius: 42px; margin-right: 12px;">
            <div class="col-md-2">
              <img src="/assets/images/Client/notification.svg" class="card-img" alt="..." style="width: auto; background-color: blue; height: auto;position: relative;top: 0;bottom: 0;margin: auto; margin-left: -1px;margin-top: 8px;border-radius: 15px;">
            </div>
          </div>
          <div style="background-color: blue;width: 35px;height: 35px;border-radius: 42px; margin-right: 40px;">
            <div class="col-md-2">
              <img src="/assets/images/Client/settings.svg" class="card-img" alt="..." style="width: auto; background-color: blue; height: auto;position: relative;top: 0;bottom: 0;margin: auto; margin-left: -3px;margin-top: 8px;border-radius: 15px;" data-toggle="modal" data-target="#smallModal" type="button">
            </div>
          </div>
          <a href="/client/profile" style="font-family: Quicksand; font-weight: bold; font-stretch: normal; font-style: normal; line-height: 1.33; color: #2a2a35; margin-right: 10px; text-decoration: none; margin-top: -20px;"><%= user.firstname %> <%= user.lastname %></a>
          <a href="/client/profile"><img class="img-profile rounded-circle" src="<%= user.photo %>" style="width: 60px; height: 60px; object-fit: cover;"></a>
        </div>

        <!-- Nav Item - Dashboard -->
        <li class="nav-item active d-flex align-items-center justify-content-center">
            <button class="btn btn-outline-primary style_btn" style="border-radius: 10px;" id="workerBtn2">Ir a Perfil de Socio</button>
        </li>

        <!-- Divider -->
        <hr>

        <!-- Heading -->
        <div class="h5 mb-0" style="margin-left: 20px; color: black">
          Información
        </div>

        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item">
          <div class="card mb-3 style_border" style="max-width: 450px; margin: 40px 40px 10px 40px; padding: 0;">
            <div class="row no-gutters">
              <div class="col-md-4">
                <img src="/assets/images/Client/diamond.svg" class="card-img" alt="..." style="width: 51%; background-color: blue; height: 70%;position: absolute;top: 0;bottom: 0;margin: auto;margin-left: 10px;border-radius: 15px;">
              </div>
              <div class="col-md-8">
                <div class="card-body" style="padding: 15px 0 5px 0;">
                  <h5 class="card-title text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px; ">Tienes 0 pagos pendientes</h5>
                </div>
              </div>
            </div>
          </div>
        </li>

        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item">
          <div class="card mb-3 style_border" style="max-width: 450px; margin: 10px 40px 10px 40px; padding: 0;">
            <div class="row no-gutters">
              <div class="col-md-4">
                <img src="/assets/images/Client/growth.svg" class="card-img" alt="..." style="width: 51%; background-color: blue; height: 70%;position: absolute;top: 0;bottom: 0;margin: auto;margin-left: 10px;border-radius: 15px;">
              </div>
              <div class="col-md-8">
                <div class="card-body" style="padding: 15px 0 5px 0;">
                  <h5 class="card-title text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px; ">Desempeño de referidos 0/10</h5>
                </div>
              </div>
            </div>
          </div>
        </li>

        <!-- Nav Item - Utilities Collapse Menu -->
        <li class="nav-item">
          <div class="card shadow mb-4" style="margin: 10px 40px 10px 40px; display: none;">
            <!-- Card Header - Dropdown -->
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
              <h6 class="m-0 font-weight-bold text-primary" style="font-size: 14px; color: #2a2a35 !important;">Tu socio favorito</h6>
              <div class="dropdown no-arrow">
                <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLinkpartner" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="fas fa-ellipsis-h fa-sm fa-fw text-blue-400"></i>
                </a>
                <!-- <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                    <div class="dropdown-header">Reportar:</div>
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">Something else here</a>
                  </div> -->
              </div>
            </div>
            <!-- Card Body -->
            <div class="card mb-3" style="max-width: 450px; padding: 0; box-shadow: none !important;">
              <div class="row no-gutters" style="margin-top: 10px;">
                <div class="col-md-4">
                  <img src="https://source.unsplash.com/QAB-WJcbgJk/60x60" class="card-img" alt="..." style="width: auto; height: auto;position: absolute;top: 0;bottom: 0;margin: auto;">
                </div>
                <div class="col-md-8">
                  <div class="card-body" style="padding: 15px 0 5px 0;">
                    <h5 class="card-title text-left" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px; ">Eduardo Florez</h5>
                    <p class="card-text text-left" style="font-weight: normal; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: normal; color: #2a2a35; font-size: 14px;">4 requerimientos completados</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>

        <!-- Nav Item - Pages Collapse Menu -->
        <li class="nav-item">
          <div class="card shadow mb-4" style="margin: 100px 40px 10px 40px; background-color: #f4f4ff; box-shadow: -10px -10px 20px 0 #e0e0ff, 10px 10px 20px 0 #ffffff;">
            <!-- Card Header - Dropdown -->
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-center" style="background-color: transparent;">
              <img src="/assets/images/Client/group-8.svg" alt="..." style="margin-top: -120px;">
            </div>
            <!-- Card Body -->
            <div class="card-body text-center">
              <h6 class="m-0 font-weight-bold text-primary text-center" style="margin-top: 50px !important; color: #2a2a35 !important">Mi calificación</h6>
              <p class="card-text text-center" style="font-weight: lighter; font-stretch: normal; font-style: normal; line-height: 1.14; letter-spacing: normal; color: #2a2a35; margin-top: 10px;">Desempeño como cliente</p>
              <h6 class="m-0 font-weight-bold text-primary text-center" style="font-weight: bold; font-stretch: normal; font-style: normal; line-height: 1.14; letter-spacing: normal; color: #009270 !important; margin-top: 50px !important; font-size: 25px;">0 de 5</h6>
              <a href="/">Ver calificaciones</a>
            </div>
          </div>
        </li>

<%- include('partials/requirement/sub-footer'); -%>

<script type="text/javascript">

	function checkSingleDigit(info){

	 	if(info < 10){
	        info = '0' + info;
	    }

	    return info;

	}

	function loadCategories() {

    var category = $("#workCategory").val()

    var subcategory = '<%= user.workInfo.workSub %>';

		$.get("/client/getSubcategories/" + category)
		  .done( function(data){

		      console.log('subcategorias cargadas con exito!');
		      $('#workSub').empty()

		      if (Array.isArray(data) && data.length){

		        data.forEach((sub) =>{

		          $('#workSub').append($('<option>', {
		            value: sub.sub_category,
		            text: sub.sub_category
		          }));

            })

          $('#workSub').find("option[value='" + subcategory +"']").attr('selected', true);

		      }

		  })
		  .fail( function(xhr, textStatus, errorThrown){

		    console.log(errorThrown)
		    alert('Error en la carga de Universidades');

		  });

	}

	function loadUni() {

		var studyCountry = $("#studyCountry").val()

		var userUni = '<%= user.studyInfo.institution %>';

		$.get("/client/getUniversities/" + studyCountry)
	        .done( function(data){

	          	console.log('universidades cargadas con exito!');
        $('#institution').empty()
        $('#career').empty()

	          	if (Array.isArray(data) && data.length){

					data.forEach((uni) =>{

						$('#institution').append($('<option>', {
							value: uni.name,
							text: uni.name
						}));

					})

        $('#institution').find("option[value='" + userUni +"']").attr('selected', true);

        loadCareers();

	          }

	        })
	        .fail( function(xhr, textStatus, errorThrown){

	          console.log(errorThrown)
	          alert('Error en la carga de Universidades');

	        });

  }

        function loadCareers() {

          var userUni = $("#institution").val()

          var userCareer = '<%= user.studyInfo.career %>';

            $.get("/client/getCareers/" + userUni)
              .done( function(data){

          console.log('carreras cargadas con exito!');
          $('#career').empty()

          if (Array.isArray(data) && data.length){

            data.forEach((car) =>{

            $('#career').append($('<option>', {
            value: car.career,
            text: car.career
        }));

      })

    $('#career').find("option[value='" + userCareer +"']").attr('selected', true);

        }

      })
      .fail( function(xhr, textStatus, errorThrown){

        console.log(errorThrown)
        alert('Error en la carga de carreras');

      });

}

	// Actualiza los selects al cargar la pagina para que tenga seleccioanda las opciones del usuario
	function updateSelects(){

    var userUni = '<%= user.workInfo.yearsExp %>';

    var gender = '<%= user.gender %>';

        $('#yearsExp').find("option[value='" + userUni +"']").attr('selected', true);
        //$("input[name=""]radio[value="+gender+"]").attr("checked","checked");
        $('input[name=radio2]').each(function() {
           if ($(this).val() == gender){
             $(this).attr("checked","checked");
           }

        });


  }

 	$(document).ready(function(){

 		$("#studyCountry").change();
    $("#workCategory").change();

 		updateSelects();

	    $(".info-option").on("click", function(){

	        $(".personal-info").addClass("d-none");
        	var toCollapse = $(this).data( "target" );

        	$(toCollapse).removeClass("d-none");

	        $(".info-option.active").not($(this)).removeClass("active");
	        $(this).addClass("active");

	    });

	    $(".form-input").on("change", function(){

	        $("#addUniversity").prop('disabled', false)

	    });

	    $("#resume").on("change", function(){

	        $("#saveChanges").prop('disabled', false)

	    });

		$("#resume").change(function() {

			if (!this.files[0])
				return $("#resume_file").html("<span>Adjuntar archivo &nbsp</span><i class='fa fa-paperclip' aria-hidden='true'></i>")

			$("#resume_file").text(this.files[0].name)

		});

    $("#profPic").change(function() {

			if (!this.files[0]) {
        return $("#profile_file").html("<span>Adjuntar foto &nbsp</span><i class='fa fa-paperclip' aria-hidden='true'></i>")
      } else {
        if (this.files[0].size > 1048576) {
          alert("Tu foto de perfil no puede pesar más de 1 MB");
          return $("#profile_file").html("<span>Adjuntar foto &nbsp</span><i class='fa fa-paperclip' aria-hidden='true'></i>")
        } else {
          $("#profile_file").text(this.files[0].name)
        }
      }
		});

/*
	    $("#saveChanges").on("click", function(){

	        console.log("posted");
        	var userInfo = getAllInfo();
		    $.post("/partner/updateInfo/",
		      	userInfo)
		      	.done( function(data){

		      		//sendResume();
		        	console.log('added', data);

		      	})
		      	.fail( function(xhr, textStatus, errorThrown){

		        	console.log(errorThrown)
		        	//$('#errorModal').modal('show');

		      	});

	        $(this).prop('disabled', true);

	    });*/

		var today = new Date();
		// Minimo de 13 años para crearse una cuenta
		var year = today.getFullYear() - 13
		var month = today.getMonth() + 1
		var day = today.getDate()

	    day = checkSingleDigit(day);
	    month = checkSingleDigit(month);

	    year = year.toString();
		month = month.toString();
		day = day.toString();

		var fullDate = year +'-'+ month +'-'+ day
		console.log(fullDate)

		// Pone el limite al calendario
		document.getElementById("dob").setAttribute("max", fullDate);

    });

 	function sendResume(){

 		var myFormData = new FormData();
 		var fileInput = document.getElementById("resume");
 		console.log(fileInput.files[0])
		myFormData.append('resume', fileInput.files[0]);
		console.log(myFormData)
		$.ajax({
		  	url: '/client/sendResume',
		  	type: 'POST',
		  	processData: false, // important
		  	contentType: false, // important
		  	data: myFormData
		})
      	.done( function(data){

        	console.log('resume sent succesfully');

      	})
      	.fail( function(xhr, textStatus, errorThrown){

        	console.log(errorThrown)
        	console.log('failed sending resume');
        	//$('#errorModal').modal('show');

      	});

   }

   $("#add_university").change(function() {

var type = $(this).val();

if (type == "Universidad"){

  $(".universityStuff").removeClass("d-none");
  $(".careerStuff").addClass("d-none");
  $(".workStuff").addClass("d-none");

} else if (type == "Carrera"){

  $(".universityStuff").removeClass("d-none");
  $(".careerStuff").removeClass("d-none");
  $(".workStuff").addClass("d-none");

} else if (type == "Categoría Laboral"){

  $(".universityStuff").addClass("d-none");
  $(".careerStuff").addClass("d-none");
  $(".workStuff").removeClass("d-none");

}


})

function getFormInfo(){

var allInputs = $(".form-input")
var objectInfo = {};

for (var i = 0; i < allInputs.length; i++){
  objectInfo[allInputs[i].id] = allInputs[i].value;
}

return objectInfo;
}


$("#addUniversity").click(function(){

var universityInfo = getFormInfo();
console.log(universityInfo)

$.post("/db/addUniversity",
  universityInfo
)
.done( function(data){

  alert("Solicitud envíada con éxito")
  $('#addUni').modal("hide")

})
.fail( function(xhr, textStatus, errorThrown){

    console.log(xhr.responseText)
    alert("Error enviando la solicitud! " + xhr.responseText)

});

return false;

})
/*
 	function getAllInfo(){
 		var userInfo = {
 			//informacion personal
 			firstname: $("#firstname").val(),
 			lastname: $("#lastname").val(),
 			userId: $("#userId").val(),
 			dob: $("#dob").val(),
 			bornCountry: $("#bornCountry").val(),
 			livingCity: $("#livingCity").val(),
 			profPic: $("#profPic").val(),
 			//informacion academica
 			studyCountry: $("#studyCountry").val(),
 			institution: $("#institution").val(),
 			career: $("#career").val(),
 			specialty: $("#specialty").val(),
 			//informacion laboral
 			yearsExp: $("#yearsExp").val(),
			resume: $("#resume").val(),
 			workCategory: $("#workCategory").val(),
 			workSub: $("#workSub").val(),
 		}

    	return userInfo;
 	}*/

</script>
